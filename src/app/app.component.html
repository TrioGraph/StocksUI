<div class="layout">
  <div class="global-loading" *ngIf="loading.isLoading$ | async">
    <div class="loader">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
  </div>
  <aside class="sidenav" [class.collapsed]="isSidebarCollapsed">
    <div class="sidenav-header">
      <button class="burger" (click)="toggleSidebar()" aria-label="Toggle menu">☰</button>
      <strong class="brand">Stock Broker</strong>
    </div>
    <nav class="sidenav-nav">
      <a routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
      <a routerLink="/login" routerLinkActive="active">Login</a>
      <div class="nav-sep"></div>
      <div class="nav-group">Pages</div>
      <ng-container *ngFor="let p of pages">
        <a [routerLink]="p.path" routerLinkActive="active">{{p.title}}</a>
      </ng-container>
    </nav>
    <div class="sidenav-footer">
      <button class="btn" (click)="showSettings = true">Settings</button>
    </div>
  </aside>

  <div class="main">
    <header class="topbar">
      <button class="burger topbar-burger" (click)="toggleSidebar()" aria-label="Toggle menu">☰</button>
      <div class="topbar-title">Admin Dashboard</div>
      <div class="topbar-actions">
        <button *ngIf="auth.isLoggedIn()" class="btn" (click)="logout()">Logout</button>
      </div>
    </header>

    <div class="content container">
      <router-outlet></router-outlet>
      <app-settings-modal *ngIf="showSettings" (close)="showSettings=false"></app-settings-modal>
    </div>
  </div>
</div>
