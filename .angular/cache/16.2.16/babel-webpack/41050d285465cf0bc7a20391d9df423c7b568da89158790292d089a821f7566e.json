{"ast":null,"code":"import _asyncToGenerator from \"D:/Stock/UI/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/theme.service\";\nimport * as i2 from \"../services/toast.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction SettingsModalComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", f_r2.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(f_r2.label);\n  }\n}\nfunction SettingsModalComponent_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const m_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", m_r3.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(m_r3.label);\n  }\n}\nlet SettingsModalComponent = /*#__PURE__*/(() => {\n  class SettingsModalComponent {\n    constructor(theme, toast) {\n      this.theme = theme;\n      this.toast = toast;\n      this.close = new EventEmitter();\n      this.fonts = [{\n        label: 'Poppins (Sans)',\n        value: 'poppins'\n      }, {\n        label: 'Inter (Sans)',\n        value: 'inter'\n      }, {\n        label: 'Roboto (Sans)',\n        value: 'roboto'\n      }, {\n        label: 'Source Sans 3 (Sans)',\n        value: 'source'\n      }, {\n        label: 'Nunito (Sans)',\n        value: 'nunito'\n      }, {\n        label: 'Serif (Merriweather)',\n        value: 'serif'\n      }, {\n        label: 'Mono (JetBrains Mono)',\n        value: 'mono'\n      }];\n      this.motions = [{\n        label: 'Full',\n        value: 'full'\n      }, {\n        label: 'Reduced',\n        value: 'reduced'\n      }, {\n        label: 'Off',\n        value: 'none'\n      }];\n      this.currentFont = 'sans';\n      this.currentMotion = 'full';\n      this.pendingFont = '';\n      this.pendingMotion = '';\n      this.previewFont = true;\n      this.previewMotion = false;\n      this.currentFont = this.theme.getFont();\n      this.currentMotion = this.theme.getMotion();\n      this.pendingFont = this.currentFont;\n      this.pendingMotion = this.currentMotion;\n    }\n    previewApplyFont(p) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (!p) return;\n        try {\n          yield _this.theme.loadFont(p);\n          // set attribute for preview (do not persist)\n          document.documentElement.setAttribute('data-font', p);\n        } catch (e) {\n          console.warn('Font load failed', e);\n        }\n      })();\n    }\n    previewApplyMotion(m) {\n      if (!m) return;\n      // apply temporarily (do not persist)\n      document.documentElement.setAttribute('data-motion', m === 'full' ? '' : m);\n    }\n    apply() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        // persist font and motion using ThemeService\n        try {\n          yield _this2.theme.loadFont(_this2.pendingFont);\n          _this2.theme.setFont(_this2.pendingFont);\n          _this2.theme.setMotion(_this2.pendingMotion);\n          _this2.toast.show('Appearance updated', 2200);\n          _this2.close.emit();\n        } catch (e) {\n          _this2.toast.show('Failed to apply appearance', 3000);\n          console.error(e);\n        }\n      })();\n    }\n    cancel() {\n      // revert any temporary previews\n      this.theme.setFont(this.currentFont);\n      this.theme.setMotion(this.currentMotion);\n      this.close.emit();\n    }\n    static {\n      this.ɵfac = function SettingsModalComponent_Factory(t) {\n        return new (t || SettingsModalComponent)(i0.ɵɵdirectiveInject(i1.ThemeService), i0.ɵɵdirectiveInject(i2.ToastService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SettingsModalComponent,\n        selectors: [[\"app-settings-modal\"]],\n        outputs: {\n          close: \"close\"\n        },\n        decls: 32,\n        vars: 7,\n        consts: [[1, \"sm-overlay\", 3, \"click\"], [1, \"sm-panel\"], [1, \"sm-header\"], [1, \"sm-title\"], [1, \"sm-close\", 3, \"click\"], [1, \"sm-body\"], [1, \"form-row\"], [\"for\", \"font\"], [\"id\", \"font\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"font-sample\", 3, \"ngClass\"], [\"for\", \"motion\"], [\"id\", \"motion\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [1, \"row\", 2, \"align-items\", \"center\", \"margin-top\", \"8px\"], [2, \"margin-right\", \"8px\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"ngModelChange\"], [2, \"margin-left\", \"12px\"], [1, \"sm-actions\"], [1, \"btn\", \"secondary\", 3, \"click\"], [1, \"btn\", 3, \"click\"], [3, \"value\"]],\n        template: function SettingsModalComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵlistener(\"click\", function SettingsModalComponent_Template_div_click_0_listener() {\n              return ctx.cancel();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(1, \"div\", 1)(2, \"header\", 2)(3, \"div\", 3);\n            i0.ɵɵtext(4, \"Settings\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function SettingsModalComponent_Template_button_click_5_listener() {\n              return ctx.cancel();\n            });\n            i0.ɵɵtext(6, \"\\u2715\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"label\", 7);\n            i0.ɵɵtext(10, \"Font\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"select\", 8);\n            i0.ɵɵlistener(\"ngModelChange\", function SettingsModalComponent_Template_select_ngModelChange_11_listener($event) {\n              return ctx.pendingFont = $event;\n            })(\"change\", function SettingsModalComponent_Template_select_change_11_listener() {\n              return ctx.previewFont && ctx.previewApplyFont(ctx.pendingFont);\n            });\n            i0.ɵɵtemplate(12, SettingsModalComponent_option_12_Template, 2, 2, \"option\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 10);\n            i0.ɵɵtext(14, \"Aa Bb Cc \\u2014 The quick brown fox jumps over the lazy dog\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"div\", 6)(16, \"label\", 11);\n            i0.ɵɵtext(17, \"Motion\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"select\", 12);\n            i0.ɵɵlistener(\"ngModelChange\", function SettingsModalComponent_Template_select_ngModelChange_18_listener($event) {\n              return ctx.pendingMotion = $event;\n            })(\"change\", function SettingsModalComponent_Template_select_change_18_listener() {\n              return ctx.previewMotion && ctx.previewApplyMotion(ctx.pendingMotion);\n            });\n            i0.ɵɵtemplate(19, SettingsModalComponent_option_19_Template, 2, 2, \"option\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 13)(21, \"label\", 14)(22, \"input\", 15);\n            i0.ɵɵlistener(\"ngModelChange\", function SettingsModalComponent_Template_input_ngModelChange_22_listener($event) {\n              return ctx.previewMotion = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(23, \" Live preview\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"label\", 16)(25, \"input\", 15);\n            i0.ɵɵlistener(\"ngModelChange\", function SettingsModalComponent_Template_input_ngModelChange_25_listener($event) {\n              return ctx.previewFont = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(26, \" Live font preview\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(27, \"footer\", 17)(28, \"button\", 18);\n            i0.ɵɵlistener(\"click\", function SettingsModalComponent_Template_button_click_28_listener() {\n              return ctx.cancel();\n            });\n            i0.ɵɵtext(29, \"Cancel\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"button\", 19);\n            i0.ɵɵlistener(\"click\", function SettingsModalComponent_Template_button_click_30_listener() {\n              return ctx.apply();\n            });\n            i0.ɵɵtext(31, \"Apply\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(11);\n            i0.ɵɵproperty(\"ngModel\", ctx.pendingFont);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngForOf\", ctx.fonts);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngClass\", \"font-\" + ctx.pendingFont);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.pendingMotion);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngForOf\", ctx.motions);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngModel\", ctx.previewMotion);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngModel\", ctx.previewFont);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n        styles: [\".sm-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.36);z-index:1000}.sm-panel[_ngcontent-%COMP%]{position:fixed;right:18px;top:60px;width:360px;background:var(--card-bg);color:var(--fg);border-radius:10px;box-shadow:var(--shadow-md);z-index:1001;overflow:hidden}.sm-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(0,0,0,.06)}.sm-title[_ngcontent-%COMP%]{font-weight:700}.sm-close[_ngcontent-%COMP%]{background:transparent;border:none;font-size:16px;cursor:pointer}.sm-body[_ngcontent-%COMP%]{padding:12px}.sm-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px;justify-content:flex-end;border-top:1px solid rgba(0,0,0,.04)}.font-sample[_ngcontent-%COMP%]{margin-top:8px;padding:8px;border-radius:8px;background:rgba(0,0,0,.02);display:inline-block}\"]\n      });\n    }\n  }\n  return SettingsModalComponent;\n})();\nexport { SettingsModalComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}